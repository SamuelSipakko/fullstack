(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(40)},21:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(13),r=n.n(a),c=n(0),l=n.n(c),o=n(14),u=n(2),i=function(e){var t=e.val,n=e.handle;return l.a.createElement("div",null,"filter shown with:\xa0\xa0",l.a.createElement("input",{value:t,onChange:n}))},m=(n(21),function(e){var t=e.handle,n=e.text,a=e.type;return void 0===a?l.a.createElement("button",{onClick:t},n):l.a.createElement("button",{type:a},n)}),s={padding:"5px 10px 5px 0px",textAlign:"right"},d=function(e){var t=e.handleAdd,n=e.name,a=e.handleName,r=e.num,c=e.handleNum;return l.a.createElement("form",{onSubmit:t},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{style:s},"name:"),l.a.createElement("td",{style:s},l.a.createElement("input",{value:n,onChange:a}))),l.a.createElement("tr",null,l.a.createElement("td",{style:s},"number:"),l.a.createElement("td",{style:s},l.a.createElement("input",{value:r,onChange:c}))))),l.a.createElement("div",null,l.a.createElement(m,{type:"submit",text:"add new"})))},f=function(e,t,n){var a=[],r=void 0===n?1:n,c=e,o=function(e){return-1===e?c.length:e};if(void 0===t||0===t.length)return[[l.a.createElement("span",{key:r},e)],r+1];for(;c.length>0;){var u=c.toLowerCase().search(t.toLowerCase());a.push(l.a.createElement("span",{key:2*r-1},c.substring(0,o(u)))),-1!==u&&a.push(l.a.createElement("span",{key:2*r,style:{backgroundColor:"yellow"}},c.substr(u,t.length))),c=c.substring(o(u)+t.length),r+=1}return[a,r]},h={padding:"5px 20px 5px 0px"},b=function(e){var t=e.list,n=e.filt,a=e.showTable,r=e.deletePerson,c=t.filter(function(e){return e.name.toLowerCase().includes(n.toLowerCase())||e.number.includes(n)}).map(function(e,t){if(a)return l.a.createElement("tr",{key:t},l.a.createElement("td",{style:h},f(e.name,n,1)[0]),l.a.createElement("td",{style:h},f(e.number,n,1)[0]),l.a.createElement("td",{style:h},l.a.createElement(m,{handle:r(e),text:"delete"})));var c=f(e.name,n,3),o=Object(u.a)(c,2),i=o[0],s=o[1],d=i.concat(l.a.createElement("span",{key:"0"},"\xa0\xa0\xa0\xa0")).concat(f(e.number,n,s)[0]).concat(l.a.createElement("span",{key:"1"},"\xa0\xa0\xa0\xa0")).concat(l.a.createElement(m,{key:2,handle:r(e),text:"delete"}));return l.a.createElement("tr",{key:2*t-1},l.a.createElement("td",{key:2*t,style:h},d))});return l.a.createElement("table",null,l.a.createElement("tbody",null,c))},p=n(3),E=n.n(p),v="/api/persons",y=function(){return E.a.get(v).then(function(e){return e.data})},g=function(e){return E.a.post(v,e).then(function(e){return e.data})},w=function(e){return E.a.delete("".concat(v,"/").concat(e))},x=function(e,t){return E.a.put("".concat(v,"/").concat(e),t).then(function(e){return e.data})},j=(n(39),function(e){var t=e.notification;return null==t?null:t.successfull?l.a.createElement("div",{className:"success"},t.message):l.a.createElement("div",{className:"error"},t.message)}),O=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(u.a)(r,2),f=s[0],h=s[1],p=Object(c.useState)(""),E=Object(u.a)(p,2),v=E[0],O=E[1],k=Object(c.useState)(""),C=Object(u.a)(k,2),N=C[0],A=C[1],S=Object(c.useState)(!0),L=Object(u.a)(S,2),D=L[0],P=L[1],T=Object(c.useState)(null),G=Object(u.a)(T,2),J=G[0],B=G[1],I=function(e,t){B({message:e,successfull:t}),setTimeout(function(){return B(null)},7e3)};return Object(c.useEffect)(function(){y().then(function(e){return a(e.sort(function(e,t){return e.name.localeCompare(t.name)}))})},[]),l.a.createElement("div",null,l.a.createElement(j,{notification:J}),l.a.createElement("h2",null,"Phonebook"),l.a.createElement(i,{val:N,handle:function(e){return A(e.target.value)}}),l.a.createElement("h2",null,"Add a new contact"),l.a.createElement(d,{handleAdd:function(e){e.preventDefault();var t=v.trim().split("").filter(function(e,t,n){return isNaN(e)&&"-"!==e&&n.indexOf(e)===t}).sort(),r=n.find(function(e){return e.number===v.trim()});0===f.length?I("No name given",!1):0===v.length?I("No number given",!1):0!==t.length?I("number includes unaccepted characters: '".concat(t.join(", "),"'"),!1):0!==n.filter(function(e){return e.name===f.trim()}).length?void 0!==r?r.name===f.trim()?I("A contact already exists with given data.",!1):I("Given phonenumber has already been registered for ".concat(r.name),!1):window.confirm("".concat(f," has already been added to the phonebook.")+" Do you want to replace the old number with a new one?")&&function(){var e=n.find(function(e){return e.name===f.trim()}),t=Object(o.a)({},e,{number:v.trim()});x(t.id,t).then(function(e){a(n.map(function(n){return n.id!==t.id?n:e})),I("Changed the number of ".concat(f," to ").concat(v),!0),h(""),O("")}).catch(function(e){y().then(function(e){a(e.sort(function(e,t){return e.name.localeCompare(t.name)}))}),I(e.response.data.error,!1)})}():void 0!==r?I("Given phonenumber has already been registered for ".concat(r.name),!1):g({name:f.trim(),number:v.trim()}).then(function(e){a(n.concat(e).sort(function(e,t){return e.name.localeCompare(t.name)})),I("Added ".concat(f),!0),h(""),O("")}).catch(function(e){y().then(function(e){a(e.sort(function(e,t){return e.name.localeCompare(t.name)}))}),I(e.response.data.error,!1)})},name:f,handleName:function(e){return h(e.target.value)},num:v,handleNum:function(e){return O(e.target.value)}}),l.a.createElement("h2",null,"Numbers \xa0\xa0\xa0",l.a.createElement(m,{handle:function(){return P(!D)},text:"show "+(D?"linearly":"in table")})),l.a.createElement(b,{list:n,filt:N,showTable:D,deletePerson:function(e){return function(){window.confirm("Are you sure you want to delete '".concat(e.name,"'?"))&&w(e.id).then(function(){a(n.filter(function(t){return t!==e})),I("Deleted ".concat(e.name),!0)}).catch(function(){a(n.filter(function(t){return t!==e})),I("".concat(e.name," has already been removed from server"),!1)})}}}))};r.a.render(l.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.51d87ec0.chunk.js.map